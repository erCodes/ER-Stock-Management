<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ER-Stock Management</title>
    <base href="/" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <!--<link rel="stylesheet" href="css/app.css" />-->
    <!--<link rel="icon" type="image/png" href="favicon.png" />-->
    <script src="C:\Users\eetur\source\repos\ER-Stock Management\CommonFunctions.js" type="text/javascript" charset="utf-8"></script>
    <link href="C:\Users\eetur\source\repos\ER-Stock Management\Default.css" rel="stylesheet" />
    <link href="C:\Users\eetur\source\repos\ER-Stock Management\Darkmode.css" rel="stylesheet" />
</head>
<body>
    <div class="container">
        <div class="row p-2">
            <div class="col-sm text-nowrap">
                <div class="text-left" id="company">ER-Stock Management</div>
            </div>
            <div class="col-md d-flex d-inline align-self-center justify-content-md-end text-nowrap">
                <div class="d-flex d-inline">
                    <img class="icons" src="C:\Users\eetur\source\repos\ER-Stock Management\fi.png" onclick="ChangeLanguage('fi')" alt="FI" />
                    <div>&emsp;</div>
                    <img class="icons" src="C:\Users\eetur\source\repos\ER-Stock Management\gb.png" onclick="ChangeLanguage('en')" alt="EN" />
                    <div>&emsp;</div>
                    <img class="icons" src="C:\Users\eetur\source\repos\ER-Stock Management\dark.png" alt="Light/Dark" />
                </div>
            </div>
        </div>

        <div class="row pt-4">
            <div class="col text-center">
                <div class="col text-center" id="StoresText"></div>
                <div class="col text-center" id="ErrorsText"></div>
            </div>
        </div>

        <div class="row d-flex justify-content-center">
            <div class="col-auto py-3" id="stores">
            </div>

            <div class="col-auto py-3">
                <button type="button" id="addStore" class="btn btn-secondary" onclick="Redirect('AddStore.html')"></button>
            </div>
            <div class="col-auto py-3">
                <button type="button" id="productCategories" class="btn btn-secondary" onclick="Redirect('ProductCategories.html')"></button>
            </div>
        </div>
    </div>



    <script type="text/javascript" charset="utf-8">
        let stores = null;

        window.addEventListener('DOMContentLoaded', () => RenderPage(), false);

        async function RenderPage() {
            //localStorage.clear();
            if (!localStorage.getItem("Lang")) {
                await ReadLanguage();
            }
            const lang = localStorage.getItem("Lang");
            document.getElementById('addStore').innerHTML = Translation("AddStore", lang);
            document.getElementById('productCategories').innerHTML = Translation("ProductCategories", lang);


            await fetch('https://localhost:7233/AllBasicData')
                .then(data => data.json())
                .then(data => {
                    console.log(data)
                    if (data) {
                        document.getElementById('StoresText').innerHTML = Translation("StoresText", lang);
                        data.forEach((element) => CreateStoreButton(element))
                    }
                    else {
                        document.getElementById('StoresText').innerHTML = Translation("StoresTextNotFound", lang);
                    }
                })
                .catch((error) => {
                    console.error(error)
                });

            console.log(window.location)
            console.log(window.location.href)
            console.log(window.location.hostname)
            console.log(window.location.pathname)
        }

        function CreateStoreButton(item, index) {
            console.log(item);
            var buttons = document.getElementById('stores');
            var button1 = document.createElement('button');
            button1.type = 'button';
            button1.className = 'btn btn-primary';
            button1.value = item.name;
            button1.innerHTML = item.name;

            //button1.setAttribute('type', 'button');
            //button1.setAttribute('class', 'btn-primary');
            //button1.setAttribute('value', item.name);
            button1.onclick = () => { Redirect('BrowseStore.html', 'StoreId', item.id) }
            //button1.innerHTML = item.name;

            buttons.appendChild(button1);
            console.log(button1);
        }
    </script>
</body>
</html>